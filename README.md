# The TPC-H Benchmark for MySQL Database

*A full Python script for running the TPC-H benchmark on MySQL.*

## 1. Prerequisites

### 1.1. Create a new MySQL user

In Linux terminal, run the commands below in order to create the test user.

```bash
sudo mysql -u root
CREATE USER 'user'@'localhost' IDENTIFIED BY '123456';
GRANT ALL PRIVILEGES ON * . * TO 'user'@'localhost';
```

### 1.2. Install dependencies

Check whether the following libraries are already installed in you machine. If not, run the respective command of the missing library in a Linux terminal in order to install it. In case of Python3 versions, replace *pip* to *pip3*.

##### [MySQL connector for Python](https://dev.mysql.com/doc/connector-python/en/connector-python-installation-binary.html)
```bash
pip install mysql-connector-python
```
##### [Pandas](https://pandas.pydata.org)
```bash
pip install pandas
```
##### [NumPy](https://numpy.org)
```bash
pip install numpy
```
## Set the parameters

In `main.py`, make sure the parameter `dbgen` is set to `True` and assign a float value for `sf`, which indicates the amount of dummy data that will be generated by DBGEN. By default, `sf = 0.1`, which means that DBGEN will generate 100MB of data. This number has been defined for testing purposes only. The oficial [TPC-H documentation](documentation/tpc-h_v2.18.0.pdf), on the other hand, specifies a minimum data size of 1GB to perform the benchmark.

## Run the benchmark
Now, the script is ready to run. In the project directory, open the terminal and type the following command: `python main.py` (In versions of Python3, type `python3 main.py` instead). 

## Outputs

In the end of execution, the script will print on screen the following metrics, according to the [TPC-H documentation](documentation/tpc-h_v2.18.0.pdf):

- ***Database Load Time***, measured in seconds;
- ***Power Test Time***, measured in seconds;
- ***Power@Size Metric***, which express, approximately, the number of queries that can be executed per hour in *SF* GB of data;
- ***Throughput Test Time***, measured in seconds;
- ***Throughput@Size Metric***, which is similar to *Power@Size Metric*, however its evaluation is performed in a parallel environment;
- ***QphH@Size Metric***, the Composite Query-Per-Hour Performance Metric, which combines the values of the corresponding metrics   *Power@Size* and *Throughput@Size* into a single metric.

## Further material

For further information regarding TPC-H, it is recommended to read the [TPC-H manual](documentation/tpc-h_v2.18.0.pdf) and the paper entitled [Benchmarking with TPC-H on Off-the-Shelf Hardware: An Experiments Report](documentation/tpch_benchmark_paper.pdf). Also, an overview of the TPC-H workflow is provided [here](documentation/tpch_workflow.pdf). This file describes and explains, in a nutshell, all the steps performed by the benchmark.
